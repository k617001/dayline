<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2016 by anonymous (http://jsbin.com/xutuvecelo/3/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
<div>
  <p>
    換日線 
    <select id="dayLine">
      <option value="0">0:00</option>
      <option value="1">1:00</option>
      <option value="2">2:00</option>
      <option value="3">3:00</option>
      <option value="4">4:00</option>
      <option value="5">5:00</option>
      <option value="6">6:00</option>
      <option value="7">7:00</option>
      <option value="8">8:00</option>
      <option value="9">9:00</option>
      <option value="10">10:00</option>
      <option value="11">11:00</option>
      <option value="12">12:00</option>
      <option value="13">13:00</option>
      <option value="14">14:00</option>
      <option value="15">15:00</option>
      <option value="16">16:00</option>
      <option value="17">17:00</option>
      <option value="18">18:00</option>
      <option value="19">19:00</option>
      <option value="20">20:00</option>
      <option value="21">21:00</option>
      <option value="22">22:00</option>
      <option value="23">23:00</option>
    </select>
  </p>
  </div>
<div>
  <p>
    開始時間 
    <select id="sTime">
      <option value="0">0:00</option>
      <option value="1">1:00</option>
      <option value="2">2:00</option>
      <option value="3">3:00</option>
      <option value="4">4:00</option>
      <option value="5">5:00</option>
      <option value="6">6:00</option>
      <option value="7">7:00</option>
      <option value="8">8:00</option>
      <option value="9">9:00</option>
      <option value="10">10:00</option>
      <option value="11">11:00</option>
      <option value="12">12:00</option>
      <option value="13">13:00</option>
      <option value="14">14:00</option>
      <option value="15">15:00</option>
      <option value="16">16:00</option>
      <option value="17">17:00</option>
      <option value="18">18:00</option>
      <option value="19">19:00</option>
      <option value="20">20:00</option>
      <option value="21">21:00</option>
      <option value="22">22:00</option>
      <option value="23">23:00</option>
    </select>
  </p>
  </div>
<div>
  <p>
    結束時間 
    <select id="eTime">
      <option value="0">0:00</option>
      <option value="1">1:00</option>
      <option value="2">2:00</option>
      <option value="3">3:00</option>
      <option value="4">4:00</option>
      <option value="5">5:00</option>
      <option value="6">6:00</option>
      <option value="7">7:00</option>
      <option value="8">8:00</option>
      <option value="9">9:00</option>
      <option value="10">10:00</option>
      <option value="11">11:00</option>
      <option value="12">12:00</option>
      <option value="13">13:00</option>
      <option value="14">14:00</option>
      <option value="15">15:00</option>
      <option value="16">16:00</option>
      <option value="17">17:00</option>
      <option value="18">18:00</option>
      <option value="19">19:00</option>
      <option value="20">20:00</option>
      <option value="21">21:00</option>
      <option value="22">22:00</option>
      <option value="23">23:00</option>
    </select>
  </p>
  </div>
  <div id="checkResult"></div>
  
  
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script id="jsbin-javascript">

var $dayLine = $("#dayLine"),
    $sTime = $("#sTime"),
    $eTime = $("#eTime"),
    $checkResult = $("#checkResult"),
    dayLineMap = []
    ;

//event
$eTime.change(check);
$sTime.change(check);
$dayLine.change(function() {
  initDayLine();
  check();
});

function check() {
  //無dayline對應時執行
  if(dayLineMap.length === 0){
    initDayLine();
  }
  
  //dayLine轉換成24小時制
  var sHour = dayLineMap[$sTime.val() + '_'],
      eHour = dayLineMap[$eTime.val() + '_'];
	  
	eHour = eHour === 0 ? 24 : eHour;
  
  //驗証結果
  if(vaild(sHour, eHour)) {
    $checkResult.html('OK!!, 共'+(eHour-sHour)+'小時');
  }
  else {
    $checkResult.html('Fail!!');
  }
}


function initDayLine() {
  var dayLine = $dayLine.val();
  setDayLineMap(dayLine);
}

//將dayline時間轉成24小時制
function setDayLineMap(dayLine) {
  var dayLineTmp = dayLine;
  for(var i = 0; i < 24; i++) {
    dayLineMap[dayLineTmp + '_'] = i;
    dayLineTmp++;
    if(dayLineTmp >= 24) {
      dayLineTmp = 0;
    }
  }
  //console.log(dayLineMap);
}

//驗証
function vaild(start, end) {
  return (end - start) >= 0;
}
</script>
</body>
</html>
